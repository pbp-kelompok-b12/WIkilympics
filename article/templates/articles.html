{% extends 'base.html' %}
{% load static %}

{% block meta %}
<title>WIkilympics</title>
{% endblock meta %}

{% block content %}
{% include 'navbar.html' %}
<div class="bg-gray-50 w-full pt-16 min-h-screen">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <div class="mb-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-2">Latest Sports Articles</h1>
            <p class="text-gray-600">
                Dive into the world of <span class="text-blue-600 font-semibold">Athletics</span>, 
                <span class="text-blue-600 font-semibold">Swimming</span>, and more!
            </p>
        </div>

        <button onclick="showModal()" class="inline-flex items-center px-4 py-2 bg-gray-200 text-gray-700 font-semibold rounded-md hover:bg-gray-300 transition-colors mb-4">
            Add Article
        </button>


        <div id="loading" class="bg-white rounded-lg border border-gray-200 p-12 text-center hidden">
        <svg class="animate-spin h-8 w-8 text-blue-600 inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
        </svg>
        <p class="text-gray-600 mt-3">Loading articles...</p>
        </div>

        <div id="error" class="hidden text-red-600 bg-red-50 p-4 border border-red-200 rounded-lg">
            <p class="font-medium">Failed to load articles. Please try again later.</p>
        </div>

        <div id="grid" class="hidden"></div>

        <div id="empty" class="bg-white rounded-lg border border-gray-200 p-12 text-center hidden">
            <div class="w-32 h-32 mx-auto mb-4">
            <img src="{% static 'image/no-product.png' %}" alt="No article available" class="w-full h-full object-contain">
            </div>
            <h3 class="text-lg font-medium text-gray-900 mb-2">No article found</h3>
            <p class="text-gray-500 mb-6">The archives are empty. Check back later for new stories!</p>
        </div>
    </div>
</div>

<script>
// Configuration
const ARTICLE_API_ENDPOINT = "{% url 'main:show_json' %}";
const CURRENT_USER_ID = "{{ user.id|default_if_none:'' }}";
// const IS_AUTHENTICATED = "{{ user.is_authenticated|yesno:'true,false' }}" === 'true';

// DOM Elements
const loadingSpinner = document.getElementById('loading');
const errorMessage = document.getElementById('error');
const emptyStateDisplay = document.getElementById('empty');
const articlesGridContainer = document.getElementById('grid');

// State Variables
let allArticlesData = [];

// Show/hide page sections
function displayPageSection({ showLoading = false, showError = false, showEmpty = false, showGrid = false }) {
    loadingSpinner.classList.toggle('hidden', !showLoading);
    errorMessage.classList.toggle('hidden', !showError);
    emptyStateDisplay.classList.toggle('hidden', !showEmpty);
    articlesGridContainer.classList.toggle('hidden', !showGrid);
  
    // Add grid classes when showing grid
    if (showGrid) {
        // Grid utama untuk artikel (1 kolom di mobile, 2 kolom di md ke atas)
        articlesGridContainer.className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6';
    }
}

// Get readable category name
function getReadableCategoryName(categoryCode) {
    const categoryMapping = {
        athletics: 'Athletics',
        swimming: 'Swimming',
        b: 'b',
        a: 'a',
    };
  return categoryMapping[categoryCode] || categoryCode.charAt(0).toUpperCase() + categoryCode.slice(1);
}

// // Fetch articles from server
// async function fetchArticlesFromServer() {
//     try {
//         const response = await fetch(ARTICLE_API_ENDPOINT)
//         const data = await response.json();
//         return data;
//     }
// }


// // Event handler for like/dislike
// async function handleLikeDislike(arricleId, action) {
    
// }

</script>


